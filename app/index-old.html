<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Chris Ingoe - Test</title>
    <style type="text/css"></style>
    <meta name="author" content="UserUndefined">
    <meta name="description" content="Test image collection web application">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/materialize.min.css">
</head>
<body>
<nav class="top-nav">
    <div class="container">
        <div class="nav-wrapper"><a class="page-title">Image Collector</a>
        </div>
    </div>
</nav>
<div class="container">
    <div class="row"></div>
    <div class="row">
        <div class="col s12">
            <div class="input-field col s6">
                <span>Camera:</span>
                <input id="image_filepath" type="file" class="validate" accept="image/*" capture="camera">
                <!--label for="image_filepath">Image Filepath</label-->
                <!--input type="file" accept="image/*" capture="camera"-->
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="input-field col s6">
                <span>Microphone #1:</span>
                <input type="file" accept="audio/*;capture=microphone">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="input-field col s6">
                <span>Microphone #2:</span>
                <input id="audio_filepath" type="file" class="validate" accept="audio/*" capture="microphone">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="input-field col s6">
                <span>Video:</span>
                <input id="video_filepath" type="file" class="validate" accept="audio/*" capture="video">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="input-field col s6">
                <span>Webkit Speech:</span>
                <input type="text" x-webkit-speech>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="input-field col s12">
                <div class="speech">
                        <span>
                            <input type="text" name="q" id="transcript" placeholder="Speak" />
                            <button class="waves-effect waves-light btn" onclick="startDictation()">Start Recording</button>
                        </span>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="js/materialize.min.js"></script>
<script>
    function startDictation() {

        if (window.hasOwnProperty('webkitSpeechRecognition')) {

            var recognition = new webkitSpeechRecognition();

            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.lang = "en-US";
            recognition.start();

            recognition.onresult = function(e) {
                document.getElementById('transcript').value
                        = e.results[0][0].transcript;
                recognition.stop();
                //document.getElementById('labnol').submit();
            };

            recognition.onerror = function(e) {
                recognition.stop();
            }

        }
    }
</script>
</html>